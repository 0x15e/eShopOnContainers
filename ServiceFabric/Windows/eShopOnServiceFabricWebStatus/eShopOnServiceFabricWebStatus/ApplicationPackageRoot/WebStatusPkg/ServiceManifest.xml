<?xml version="1.0" encoding="utf-8"?>
<ServiceManifest Name="WebStatusPkg"
                 Version="1.0.0"
                 xmlns="http://schemas.microsoft.com/2011/01/fabric"
                 xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <ServiceTypes>
    <!-- This is the name of your ServiceType.
         The UseImplicitHost attribute indicates this is a guest service. -->
    <StatelessServiceType ServiceTypeName="WebStatusType" UseImplicitHost="true" />
  </ServiceTypes>

  <!-- Code package is your service executable. -->
  <CodePackage Name="Code" Version="1.0.0">
    <EntryPoint>
      <!-- Follow this link for more information about deploying Windows containers to Service Fabric: https://aka.ms/sfguestcontainers -->
      <ContainerHost>
        <ImageName>eshop/webstatus-win:#{tag}#</ImageName>
      </ContainerHost>
    </EntryPoint>
    <!-- Pass environment variables to your container: -->
    <EnvironmentVariables>
      <EnvironmentVariable Name="ASPNETCORE_ENVIRONMENT" Value="Development"/>
      <EnvironmentVariable Name="ASPNETCORE_URLS" Value="http://0.0.0.0:80"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:1:Name" Value="WebMVC HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:1:Uri" Value="http://webmvc/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:2:Name" Value="WebSPA HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:2:Uri" Value="http://webspa/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:3:Name" Value="Web Shopping Aggregator GW HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:3:Uri" Value="http://webshoppingagg/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:4:Name" Value="Mobile Shopping Aggregator HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:4:Uri" Value="http://mobileshoppingagg/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:5:Name" Value="Mobile Shopping API GW HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:5:Uri" Value="http://mobileshoppingapigw/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:6:Name" Value="Mobile Marketing API GW HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:6:Uri" Value="http://mobilemarketingapigw/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:7:Name" Value="Web Shopping API GW HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:7:Uri" Value="http://webshoppingapigw/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:8:Name" Value="Web Marketing API GW HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:8:Uri" Value="http://webmarketingapigw/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:9:Name" Value="Ordering HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:9:Uri" Value="http://ordering.api/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:10:Name" Value="Ordering HTTP Background Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:10:Uri" Value="http://ordering.background/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:11:Name" Value="Basket HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:11:Uri" Value="http://basket.api/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:12:Name" Value="Catalog HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:12:Uri" Value="http://catalog.api/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:13:Name" Value="Identity HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:13:Uri" Value="http://identity.api/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:14:Name" Value="Marketing HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:14:Uri" Value="http://marketing.api/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:15:Name" Value="Locations HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:15:Uri" Value="http://locations.api/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:16:Name" Value="Payments HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:16:Uri" Value="http://payment.api/hc"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:17:Name" Value="Ordering SignalRHub HTTP Check"/>
      <EnvironmentVariable Name="HealthChecks-UI:HealthChecks:17:Uri" Value="http://ordering.signalrhub/hc"/>
      <EnvironmentVariable Name="OrderingBackgroundTasksUrl" Value="http://ordering.background/hc"/>
      <EnvironmentVariable Name="ApplicationInsights:InstrumentationKey" Value=""/>
      <EnvironmentVariable Name="OrchestratorType" Value="SF"/>
    </EnvironmentVariables>
  </CodePackage>

  <!-- Config package is the contents of the Config directoy under PackageRoot that contains an 
       independently-updateable and versioned set of custom configuration settings for your service. -->
  <ConfigPackage Name="Config" Version="1.0.0" />

  <Resources>
    <Endpoints>
      <!-- This endpoint is used by the communication listener to obtain the port on which to 
           listen. Please note that if your service is partitioned, this port is shared with 
           replicas of different partitions that are placed in your code. -->
      <Endpoint Name="WebStatusTypeEndpoint" Port="5107" UriScheme="http"/>
    </Endpoints>
  </Resources>
</ServiceManifest>